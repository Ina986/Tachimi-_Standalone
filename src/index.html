<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tachimi</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <header class="header">
            <h1>Tachimi</h1>
            <span class="badge">Standalone</span>
            <!-- Ê©üËÉΩ„Ç¢„É≥„É≠„ÉÉ„ÇØÁî®Èçµ„Ç¢„Ç§„Ç≥„É≥ÔºàÈö†„Åó„Éú„Çø„É≥È¢®Ôºâ -->
            <span id="btnFeatureLock" class="feature-lock-icon">
                <svg class="lock-icon lock-closed" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
                </svg>
                <svg class="lock-icon lock-open" viewBox="0 0 24 24" fill="currentColor" style="display:none;">
                    <path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"/>
                </svg>
            </span>
            <button id="btnResetSettings" class="btn-reset-settings" title="Ë®≠ÂÆö„ÇíÂàùÊúüÁä∂ÊÖã„Å´Êàª„Åô">„É™„Çª„ÉÉ„Éà</button>
        </header>

        <main class="main main-horizontal">
            <!-- Â∑¶„Ç´„É©„É†: Ë®≠ÂÆö -->
            <div class="main-left">
                <!-- „Éâ„É≠„ÉÉ„Éó„Ç®„É™„Ç¢ -->
                <div class="drop-area" id="dropZone">
                    <div class="drop-area-empty" id="dropAreaEmpty">
                        <div class="drop-area-icon">üìÅ</div>
                        <div class="drop-area-text">„Éï„Ç°„Ç§„É´/„Éï„Ç©„É´„ÉÄ„Çí„Éâ„É≠„ÉÉ„Éó</div>
                    </div>
                    <div class="drop-area-loaded" id="dropAreaLoaded" style="display:none;">
                        <div class="drop-area-file-icon">‚úì</div>
                        <div id="fileInfo" class="drop-area-file-info">Êú™ÈÅ∏Êäû</div>
                        <button id="btnClearFiles" class="btn-clear" title="„ÇØ„É™„Ç¢">√ó</button>
                    </div>
                    <div class="drop-area-hint">„Åì„Åì„Å´„Éâ„É≠„ÉÉ„Éó</div>
                </div>

                <!-- Âá∫ÂäõË®≠ÂÆö -->
                <section class="section section-compact">
                    <h2>Âá∫ÂäõË®≠ÂÆö</h2>
                    <div class="output-settings">
                        <div class="output-path-row">
                            <div class="output-path-display" id="outputPathDisplay" title="">
                                <span class="output-path-label">Âá∫ÂäõÂÖà</span>
                                <span class="output-path-value" id="outputInfo">Êú™ÈÅ∏Êäû</span>
                            </div>
                            <div class="output-path-actions">
                                <button id="btnSelectOutput" class="btn-icon" title="„Éï„Ç©„É´„ÉÄ„ÇíÈÅ∏Êäû">üìÇ</button>
                                <button id="btnResetOutput" class="btn-icon btn-icon-subtle" title="„Éá„Éï„Ç©„É´„Éà„Å´Êàª„Åô">‚Ü∫</button>
                            </div>
                        </div>
                        <div class="output-name-row">
                            <span class="output-name-label">„Éï„Ç°„Ç§„É´Âêç</span>
                            <input type="text" id="outputName" value="Âá∫Âäõ" class="output-name-input" placeholder="Âá∫Âäõ„Éï„Ç°„Ç§„É´Âêç">
                            <span class="output-name-ext">.pdf</span>
                        </div>
                    </div>
                </section>

                <!-- „Çø„ÉÅ„Ç≠„É™Âá¶ÁêÜ -->
                <section class="section section-compact">
                    <h2>„Çø„ÉÅ„Ç≠„É™Âá¶ÁêÜ</h2>
                    <div id="tachikiriCards" class="tachikiri-grid-compact">
                        <div class="tachikiri-card-sm" data-value="none">
                            <div class="tachi-icon tachi-icon-none"></div>
                            <span>„Å™„Åó</span>
                        </div>
                        <div class="tachikiri-card-sm" data-value="crop">
                            <div class="tachi-icon tachi-icon-crop"></div>
                            <span>ÂàáÊäú</span>
                        </div>
                        <div class="tachikiri-card-sm" data-value="crop_and_stroke">
                            <div class="tachi-icon tachi-icon-crop-stroke"></div>
                            <span>Âàá+Á∑ö</span>
                        </div>
                        <div class="tachikiri-card-sm" data-value="stroke_only">
                            <div class="tachi-icon tachi-icon-stroke"></div>
                            <span>Á∑ö„ÅÆ„Åø</span>
                        </div>
                        <div class="tachikiri-card-sm selected" data-value="fill_white">
                            <div class="tachi-icon tachi-icon-fill"></div>
                            <span>Â°ó„Çã</span>
                        </div>
                        <div class="tachikiri-card-sm" data-value="fill_and_stroke">
                            <div class="tachi-icon tachi-icon-fill-stroke"></div>
                            <span>Â°ó+Á∑ö</span>
                        </div>
                    </div>
                    <select id="tachikiriSelect" style="display:none;">
                        <option value="none">„Å™„Åó</option>
                        <option value="crop">Âàá„ÇäÊäú„Åç</option>
                        <option value="crop_and_stroke">Âàá„ÇäÊäú„Åç+Á∑ö</option>
                        <option value="stroke_only">Á∑ö„ÅÆ„Åø</option>
                        <option value="fill_white" selected>Â§ñ„ÇíÂ°ó„Çã</option>
                        <option value="fill_and_stroke">Â°ó„Çã+Á∑ö</option>
                    </select>

                    <!-- ÁØÑÂõ≤ÊåáÂÆö -->
                    <div id="cropSettings" class="crop-settings-inline" style="display:none;">
                        <div class="crop-settings-header">
                            <span class="crop-settings-label">ÁØÑÂõ≤ÊåáÂÆö</span>
                            <span id="cropRangeStatus" class="crop-range-status warning">‚ö† Êú™Ë®≠ÂÆö</span>
                        </div>

                        <!-- Ë£ΩÁâàÂè∞„Éë„Éç„É´ -->
                        <div class="crop-action-panel">
                            <button id="btnLoadPreview" class="btn-crop-main" title="ÁîªÂÉè„Çí„Éó„É¨„Éì„É•„Éº„Åó„Å¶ÁØÑÂõ≤„ÇíÊåáÂÆö">
                                <span class="btn-crop-icon">‚äû</span>
                                <span class="btn-crop-text">
                                    <span class="btn-crop-title">„Éâ„É©„ÉÉ„Ç∞„ÅßÈÅ∏ÊäûÁØÑÂõ≤„ÇíË®≠ÂÆö</span>
                                    <span class="btn-crop-subtitle">ÁîªÂÉè„ÇíÈñã„ÅÑ„Å¶ÊåáÂÆö ‚Üí</span>
                                </span>
                            </button>
                            <div class="crop-alt-action">
                                <span class="crop-alt-divider">„Åæ„Åü„ÅØ</span>
                                <button id="btnLoadJson" class="btn-link-subtle" title="JSON„Éï„Ç°„Ç§„É´„Åã„ÇâË™≠„ÅøËæº„Åø">üìÑ JSON„Åã„ÇâË™≠„ÅøËæº„Åø</button>
                            </div>
                        </div>

                        <!-- „É©„Éô„É´ÈÅ∏ÊäûÔºàJSONË™≠ËæºÂæå„Å´Ë°®Á§∫Ôºâ -->
                        <span id="jsonInfo" class="json-status" style="display:none;">Êú™Ë®≠ÂÆö</span>
                        <div id="labelSelectArea" class="label-select-inline" style="display:none;">
                            <select id="labelSelect" class="label-select"></select>
                        </div>

                        <!-- Êï∞ÂÄ§ÂÖ•Âäõ -->
                        <div class="crop-inputs-compact">
                            <label>Â∑¶<input type="number" id="cropLeft" value="0"></label>
                            <label>‰∏ä<input type="number" id="cropTop" value="0"></label>
                            <label>Âè≥<input type="number" id="cropRight" value="0"></label>
                            <label>‰∏ã<input type="number" id="cropBottom" value="0"></label>
                            <span id="docSizeInfo" class="doc-size-info"></span>
                        </div>
                        <div id="colorSettings" class="color-row-compact" style="display:none;">
                            <div id="strokeColorRow" class="color-item" style="display:none;">
                                <label>Á∑ö:</label>
                                <select id="strokeColor">
                                    <option value="black">Èªí</option>
                                    <option value="white">ÁôΩ</option>
                                    <option value="cyan">Ê∞¥Ëâ≤</option>
                                </select>
                                <span class="color-preview" id="strokeColorPreview" style="background:#000;"></span>
                            </div>
                            <div id="fillColorRow" class="color-item" style="display:none;">
                                <label>Â°ó:</label>
                                <select id="fillColor">
                                    <option value="black">Èªí</option>
                                    <option value="white">ÁôΩ</option>
                                    <option value="cyan">Ê∞¥Ëâ≤</option>
                                </select>
                                <span class="color-preview" id="fillColorPreview" style="background:#000;"></span>
                            </div>
                            <div id="fillOpacityRow" class="color-item" style="display:none;">
                                <label>‰∏çÈÄèÊòéÂ∫¶:</label>
                                <input type="range" id="fillOpacity" min="0" max="100" value="50" class="opacity-slider-sm">
                                <span id="fillOpacityValue">50%</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- „É™„Çµ„Ç§„Ç∫ -->
                <section class="section section-compact">
                    <h2>„É™„Çµ„Ç§„Ç∫</h2>
                    <select id="resizeSelect" class="select-full">
                        <option value="none">„Å™„Åó</option>
                        <option value="percent">%ÊåáÂÆö</option>
                        <option value="fixed" selected>„Éá„Éï„Ç©„É´„ÉàÔºà2250√ó3000Ôºâ</option>
                    </select>
                    <div id="percentSettings" class="inline-setting" style="display:none;">
                        <input type="number" id="resizePercent" value="50" min="1" max="100">
                        <span>%</span>
                    </div>
                </section>
            </div>

            <!-- Âè≥„Ç´„É©„É†: Âá∫ÂäõÂΩ¢Âºè -->
            <div class="main-right">
                <section class="section section-compact section-output">
                <h2>Âá∫ÂäõÂΩ¢Âºè<span class="section-hint">ÔºàË§áÊï∞ÈÅ∏ÊäûÂèØÔºâ</span></h2>

                <!-- Âá∫ÂäõÂΩ¢Âºè„Ç´„Éº„ÉâÔºàÊ®™3Âàó„ÉªË§áÊï∞ÈÅ∏ÊäûÂèØÔºâ -->
                <div id="outputTypeCards" class="output-type-grid">
                    <div class="output-type-card selected" data-type="spread-pdf">
                        <div class="output-type-check"></div>
                        <div class="output-type-icon">
                            <div class="icon-page"></div>
                            <div class="icon-gutter"></div>
                            <div class="icon-page"></div>
                        </div>
                        <span class="output-type-label">Ë¶ãÈñã„ÅçPDF</span>
                        <span class="output-type-desc">2„Éö„Éº„Ç∏„Çí1Ë¶ãÈñã„Åç„Å´</span>
                    </div>
                    <div class="output-type-card" data-type="single-pdf">
                        <div class="output-type-check"></div>
                        <div class="output-type-icon">
                            <div class="icon-page"></div>
                        </div>
                        <span class="output-type-label">Âçò„Éö„Éº„Ç∏PDF</span>
                        <span class="output-type-desc">1„Éö„Éº„Ç∏„Åö„Å§Âá∫Âäõ</span>
                    </div>
                    <div class="output-type-card" data-type="jpeg">
                        <div class="output-type-check"></div>
                        <div class="output-type-icon">
                            <span class="icon-text">JPG</span>
                        </div>
                        <span class="output-type-label">JPEGÂá∫Âäõ</span>
                        <span class="output-type-desc">ÁîªÂÉè„Éï„Ç°„Ç§„É´„Åß‰øùÂ≠ò</span>
                    </div>
                </div>

                <!-- Ë¶ãÈñã„ÅçPDFË®≠ÂÆö„Éë„Éç„É´ -->
                <div id="spreadPdfPanel" class="output-detail-panel">
                    <div class="panel-header">
                        <span class="panel-title">Ë¶ãÈñã„ÅçPDFË®≠ÂÆö</span>
                    </div>
                    <!-- „Éì„Ç∏„É•„Ç¢„É´„Éó„É¨„Éì„É•„Éº -->
                    <div class="spread-preview-area">
                        <div class="spread-preview-box" id="spreadPreviewBox">
                            <!-- ‰ΩôÁôΩÔºàÁôΩ„ÅÑÈÉ®ÂàÜÔºâ -->
                            <div class="spread-preview-margin" id="spreadPreviewMargin">
                                <!-- Â°ó„Çä„Ç®„É™„Ç¢Ôºà„Çø„ÉÅ„Ç≠„É™Â°ó„Çä„Åå„ÅÇ„ÇãÂ†¥Âêà„Å´Ëâ≤„Åå„Å§„ÅèÔºâ -->
                                <div class="spread-preview-fill" id="spreadPreviewFill">
                                    <!-- Ë¶ãÈñã„Åç„Éö„Éº„Ç∏ÔºàÂè≥Á∂¥„ÅòÔºöÂ∑¶„ÅåÂæå„Éö„Éº„Ç∏„ÄÅÂè≥„ÅåÂÖà„Éö„Éº„Ç∏Ôºâ -->
                                    <div class="spread-preview-pages">
                                        <div class="spread-preview-page" id="spreadPreviewPageLeft">
                                            <span class="page-number" id="spreadPageLeftNum">2</span>
                                        </div>
                                        <div class="spread-preview-gutter" id="spreadPreviewGutter"></div>
                                        <div class="spread-preview-page" id="spreadPreviewPageRight">
                                            <span class="page-number" id="spreadPageRightNum">1</span>
                                            <!-- ÁôΩÁ¥ôË°®Á§∫ÔºàÂÖàÈ†≠ÁôΩÁ¥ôËøΩÂä†ONÊôÇÔºâ -->
                                            <span class="white-page-overlay" id="spreadWhitePageOverlay">
                                                <span class="white-page-text" id="spreadWhitePageText">ÁôΩÁ¥ô</span>
                                                <span class="white-page-info" id="spreadPreviewWorkInfo"></span>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- „Çπ„É©„Ç§„ÉÄ„ÉºË®≠ÂÆö -->
                    <div class="spread-settings-row">
                        <div class="toggle-slider-group">
                            <label class="checkbox-sm"><input type="checkbox" id="spreadGutterEnabled" checked><span>„Éé„Éâ</span></label>
                            <div class="slider-inline" id="spreadGutterSliderArea">
                                <input type="range" id="spreadGutterSlider" min="0" max="150" value="70" class="slider-sm">
                                <span class="slider-value" id="spreadGutterValue">70</span><span class="slider-unit">px</span>
                            </div>
                        </div>
                        <div class="toggle-slider-group">
                            <label class="checkbox-sm"><input type="checkbox" id="spreadPaddingEnabled" checked><span>‰ΩôÁôΩ</span></label>
                            <div class="slider-inline" id="spreadPaddingSliderArea">
                                <input type="range" id="spreadPaddingSlider" min="0" max="300" value="150" class="slider-sm">
                                <span class="slider-value" id="spreadPaddingValue">150</span><span class="slider-unit">px</span>
                            </div>
                        </div>
                    </div>
                    <!-- „Éö„Éº„Ç∏Ë®≠ÂÆö„Ç∞„É´„Éº„Éó -->
                    <div class="page-settings-group">
                        <span class="page-settings-label">„Éö„Éº„Ç∏Ë®≠ÂÆö</span>
                        <div class="spread-options-row">
                            <label class="checkbox-sm"><input type="checkbox" id="spreadAddNombre" checked><span>„Éé„É≥„Éñ„É´</span></label>
                            <label class="checkbox-sm"><input type="checkbox" id="spreadWhitePage" checked><span>ÂÖàÈ†≠ÁôΩÁ¥ô</span></label>
                            <label class="checkbox-sm"><input type="checkbox" id="spreadWorkInfo"><span>‰ΩúÂìÅÊÉÖÂ†±</span></label>
                        </div>
                        <!-- „Éé„É≥„Éñ„É´Ë©≥Á¥∞Ë®≠ÂÆöÔºàÂ±ïÈñãÂºèÔºâ -->
                        <div id="spreadNombreSettings" class="nombre-settings-inline">
                            <label>ÈñãÂßã:<input type="number" id="spreadNombreStart" value="1" min="1" class="nombre-input"></label>
                            <label>„Çµ„Ç§„Ç∫:
                                <select id="spreadNombreSize" class="nombre-select">
                                    <option value="small">Â∞è</option>
                                    <option value="medium" selected>‰∏≠</option>
                                    <option value="large">Â§ß</option>
                                    <option value="xlarge">ÁâπÂ§ß</option>
                                </select>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Âçò„Éö„Éº„Ç∏PDFË®≠ÂÆö„Éë„Éç„É´ -->
                <div id="singlePdfPanel" class="output-detail-panel" style="display:none;">
                    <div class="panel-header">
                        <span class="panel-title">Âçò„Éö„Éº„Ç∏PDFË®≠ÂÆö</span>
                    </div>
                    <div class="single-preview-area">
                        <div class="single-preview-box" id="singlePreviewBox">
                            <!-- „Çø„ÉÅ„Ç≠„É™Â°ó„Çä„Ç®„É™„Ç¢ -->
                            <div class="single-preview-fill" id="singlePreviewFill">
                                <div class="single-preview-page" id="singlePreviewPage">
                                    <span class="page-number" id="singlePageNum">1</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- „Éé„É≥„Éñ„É´Ë®≠ÂÆö -->
                    <div class="single-nombre-section">
                        <label class="checkbox-sm"><input type="checkbox" id="singleAddNombre" checked><span>„Éé„É≥„Éñ„É´ËøΩÂä†</span></label>
                        <div id="singleNombreSettings" class="nombre-settings-inline">
                            <label>ÈñãÂßã:<input type="number" id="singleNombreStart" value="1" min="1" class="nombre-input"></label>
                            <label>„Çµ„Ç§„Ç∫:
                                <select id="singleNombreSize" class="nombre-select">
                                    <option value="small">Â∞è</option>
                                    <option value="medium" selected>‰∏≠</option>
                                    <option value="large">Â§ß</option>
                                    <option value="xlarge">ÁâπÂ§ß</option>
                                </select>
                            </label>
                        </div>
                        <div class="nombre-hint">‚Äª ÊúâÂäπÊôÇ„ÅØPDF‰∏ãÈÉ®„Å´‰ΩôÁôΩ„ÇíËøΩÂä†</div>
                    </div>
                </div>

                <!-- JPEGË®≠ÂÆö„Éë„Éç„É´ -->
                <div id="jpegPanel" class="output-detail-panel" style="display:none;">
                    <div class="panel-header">
                        <span class="panel-title">JPEGË®≠ÂÆö</span>
                    </div>
                    <!-- JPEG„Éì„Ç∏„É•„Ç¢„É´„Éó„É¨„Éì„É•„Éº -->
                    <div class="jpeg-preview-area">
                        <div class="jpeg-preview-box" id="jpegPreviewBox">
                            <!-- „Çø„ÉÅ„Ç≠„É™Â°ó„Çä„Ç®„É™„Ç¢ -->
                            <div class="jpeg-preview-fill" id="jpegPreviewFill">
                                <div class="jpeg-preview-page" id="jpegPreviewPage">
                                    <span class="jpeg-preview-nombre" id="jpegPreviewNombre">1</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- „Éé„É≥„Éñ„É´Ë®≠ÂÆöÔºàJPEGÂçòÁã¨ÈÅ∏ÊäûÊôÇ„Å´Ë°®Á§∫Ôºâ -->
                    <div id="jpegNombreSection" class="jpeg-nombre-section">
                        <label class="checkbox-sm"><input type="checkbox" id="jpegAddNombre" checked><span>„Éé„É≥„Éñ„É´ËøΩÂä†</span></label>
                        <div id="jpegNombreSettings" class="nombre-settings-inline">
                            <label>ÈñãÂßã:<input type="number" id="jpegNombreStart" value="1" min="1" class="nombre-input"></label>
                            <label>„Çµ„Ç§„Ç∫:
                                <select id="jpegNombreSize" class="nombre-select">
                                    <option value="small">Â∞è</option>
                                    <option value="medium" selected>‰∏≠</option>
                                    <option value="large">Â§ß</option>
                                    <option value="xlarge">ÁâπÂ§ß</option>
                                </select>
                            </label>
                        </div>
                        <div class="nombre-hint">‚Äª ÁîªÂÉè‰∏ãÈÉ®„Å´ËøΩÂä†Ôºà„Çø„ÉÅ„Ç≠„É™È†òÂüüÂÜÖÔºâ</div>
                    </div>
                    <!-- PDF‰ΩµÁî®ÊôÇ„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏ -->
                    <div id="jpegPdfSyncNote" class="jpeg-sync-note" style="display:none;">
                        ‚Äª „Éé„É≥„Éñ„É´Ë®≠ÂÆö„ÅØPDFË®≠ÂÆö„Å®ÂÖ±ÈÄö„Åß„Åô
                    </div>
                    <!-- Âá∫ÂäõÂÖàË™¨Êòé -->
                    <div class="jpeg-info-text">
                        Âá∫ÂäõÂÖà: <code>Âá∫Âäõ„Éï„Ç©„É´„ÉÄ/jpg/</code>
                    </div>
                </div>
                </section>
            </div>
        </main>

        <footer class="footer">
            <div id="progressArea" class="progress-area" style="display:none;">
                <div id="progressText" class="progress-text">Âá¶ÁêÜ‰∏≠...</div>
                <div class="progress-bar-wrap">
                    <div id="progressBar" class="progress-bar"></div>
                </div>
            </div>
            <button id="btnExecute" class="btn btn-execute" disabled>ÂÆüË°å</button>
        </footer>

        <!-- ÂÆå‰∫Ü„É¢„Éº„ÉÄ„É´ -->
        <div id="modal" class="modal" style="display:none;">
            <div class="modal-content">
                <h3>Âá¶ÁêÜÂÆå‰∫Ü</h3>
                <div id="modalMessage"></div>
                <div class="modal-btns">
                    <button id="btnOpenFolder" class="btn btn-primary">„Éï„Ç©„É´„ÉÄ„ÇíÈñã„Åè</button>
                    <button id="btnCloseModal" class="btn">Èñâ„Åò„Çã</button>
                </div>
            </div>
        </div>

        <!-- „Ç´„Çπ„Çø„É†„Ç¢„É©„Éº„Éà„É¢„Éº„ÉÄ„É´ -->
        <div id="alertModal" class="alert-modal" style="display:none;">
            <div class="alert-modal-backdrop"></div>
            <div class="alert-modal-content">
                <div class="alert-modal-icon" id="alertModalIcon"></div>
                <div class="alert-modal-message" id="alertModalMessage"></div>
                <button id="alertModalOk" class="btn btn-primary alert-modal-btn">OK</button>
            </div>
        </div>

        <!-- Á¢∫Ë™ç„ÉÄ„Ç§„Ç¢„É≠„Ç∞„É¢„Éº„ÉÄ„É´ - Âç∞Âà∑Â∑•Êàø„Çπ„Çø„Ç§„É´ -->
        <div id="confirmModal" class="confirm-modal" style="display:none;">
            <div class="confirm-modal-backdrop"></div>
            <div class="confirm-modal-content">
                <div class="confirm-modal-header">
                    <span class="confirm-modal-icon">‚öô</span>
                    <span class="confirm-modal-title">Á¢∫Ë™ç</span>
                </div>
                <div class="confirm-modal-body">
                    <p id="confirmModalMessage">Ë®≠ÂÆö„ÇíÂàùÊúüÁä∂ÊÖã„Å´Êàª„Åó„Åæ„Åô„ÅãÔºü</p>
                </div>
                <div class="confirm-modal-actions">
                    <button id="confirmModalCancel" class="btn confirm-btn-cancel">„Ç≠„É£„É≥„Çª„É´</button>
                    <button id="confirmModalOk" class="btn confirm-btn-ok">„É™„Çª„ÉÉ„Éà</button>
                </div>
            </div>
        </div>

        <!-- ‰ΩúÂìÅÊÉÖÂ†±„ÇΩ„Éº„ÇπÈÅ∏Êäû„ÉÄ„Ç§„Ç¢„É≠„Ç∞ -->
        <div id="workInfoChoiceModal" class="confirm-modal" style="display:none;">
            <div class="confirm-modal-backdrop"></div>
            <div class="confirm-modal-content">
                <div class="confirm-modal-header">
                    <span class="confirm-modal-icon">&#x2139;</span>
                    <span class="confirm-modal-title">‰ΩúÂìÅÊÉÖÂ†±„ÅÆÂÖ•ÂäõÊñπÊ≥ï</span>
                </div>
                <div class="confirm-modal-body">
                    <p>‰ΩúÂìÅÊÉÖÂ†±„ÅÆÂÖ•ÂäõÊñπÊ≥ï„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</p>
                </div>
                <div class="confirm-modal-actions work-info-choice-actions">
                    <button id="workInfoChoiceJson" class="btn work-info-btn">JSONË™≠„ÅøËæº„Åø</button>
                    <button id="workInfoChoiceManual" class="btn work-info-btn">ÊâãÂãïÂÖ•Âäõ</button>
                </div>
            </div>
        </div>

        <!-- ÊâãÂãï‰ΩúÂìÅÊÉÖÂ†±ÂÖ•Âäõ„É¢„Éº„ÉÄ„É´ -->
        <div id="manualWorkInfoModal" class="confirm-modal" style="display:none;">
            <div class="confirm-modal-backdrop"></div>
            <div class="manual-workinfo-content">
                <div class="confirm-modal-header">
                    <span class="confirm-modal-icon">&#x270F;</span>
                    <span class="confirm-modal-title">‰ΩúÂìÅÊÉÖÂ†±„ÇíÂÖ•Âäõ</span>
                </div>
                <div class="manual-workinfo-form">
                    <div class="manual-workinfo-field">
                        <label for="manualLabel">„É¨„Éº„Éô„É´</label>
                        <input type="text" id="manualLabel" placeholder="„É¨„Éº„Éô„É´Âêç">
                    </div>
                    <div class="manual-workinfo-field">
                        <label for="manualTitle">„Çø„Ç§„Éà„É´</label>
                        <input type="text" id="manualTitle" placeholder="‰ΩúÂìÅ„Çø„Ç§„Éà„É´">
                    </div>
                    <div class="manual-workinfo-field">
                        <label for="manualSubtitle">„Çµ„Éñ„Çø„Ç§„Éà„É´</label>
                        <input type="text" id="manualSubtitle" placeholder="„Çµ„Éñ„Çø„Ç§„Éà„É´ÔºàÁúÅÁï•ÂèØÔºâ">
                    </div>
                    <div class="manual-workinfo-field">
                        <label for="manualVersion">Â∑ªÊï∞</label>
                        <input type="text" id="manualVersion" placeholder="‰æã: Á¨¨1Â∑ª">
                    </div>
                    <div class="manual-workinfo-field">
                        <label>ËëóËÄÖ„Çø„Ç§„Éó</label>
                        <div class="manual-workinfo-author-type">
                            <label class="radio-label"><input type="radio" name="manualAuthorType" value="single" checked><span>ËëóÔºàÂçòÁã¨Ôºâ</span></label>
                            <label class="radio-label"><input type="radio" name="manualAuthorType" value="pair"><span>‰ΩúÁîª/Âéü‰Ωú</span></label>
                            <label class="radio-label"><input type="radio" name="manualAuthorType" value="none"><span>„Åù„ÅÆ„Åæ„Åæ</span></label>
                        </div>
                    </div>
                    <div class="manual-workinfo-field" id="manualAuthor1Field">
                        <label for="manualAuthor1" id="manualAuthor1Label">ËëóËÄÖ</label>
                        <input type="text" id="manualAuthor1" placeholder="ËëóËÄÖÂêç">
                    </div>
                    <div class="manual-workinfo-field" id="manualAuthor2Field" style="display:none;">
                        <label for="manualAuthor2">Âéü‰Ωú</label>
                        <input type="text" id="manualAuthor2" placeholder="Âéü‰ΩúËÄÖÂêç">
                    </div>
                </div>
                <div class="confirm-modal-actions">
                    <button id="btnManualWorkInfoCancel" class="btn confirm-btn-cancel">„Ç≠„É£„É≥„Çª„É´</button>
                    <button id="btnManualWorkInfoConfirm" class="btn work-info-btn">Á¢∫ÂÆö</button>
                </div>
            </div>
        </div>

        <!-- Âá¶ÁêÜ‰∏≠„Ç™„Éº„Éê„Éº„É¨„Ç§ - Âç∞Âà∑Â∑•Êàø„Éá„Ç∂„Ç§„É≥ -->
        <div id="processingOverlay" class="processing-overlay" style="display:none;">
            <div class="processing-backdrop"></div>
            <!-- „Ç≠„É£„É≥„Çª„É´„Éú„Çø„É≥Ôºà„Ç™„Éº„Éê„Éº„É¨„Ç§ÂÖ®‰Ωì„ÅÆÂè≥‰∏ãÔºâ -->
            <button id="cancelProcessingBtn" class="cancel-processing-btn" title="Âá¶ÁêÜ„Çí‰∏≠Êñ≠" style="display:none;">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div class="processing-content">
                <!-- Tachimi Âá¶ÁêÜ„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
                <div class="print-machine tachimi-overlay">
                    <!-- ÊóßË¶ÅÁ¥†ÔºàJS‰∫íÊèõÊÄßÁ∂≠ÊåÅ„ÅÆ„Åü„ÇÅDOM„Å´ÊÆã„ÅôÔºâ -->
                    <div style="display:none">
                        <div class="machine-status" id="processingPhaseLabel">Ê∫ñÂÇô‰∏≠</div>
                        <div id="processingPercent">0</div>
                        <div id="processingBar"></div>
                        <div class="process-steps">
                            <div class="step" data-phase="prepare"></div>
                            <div class="step" data-phase="process"></div>
                            <div class="step" data-phase="pdf"></div>
                            <div class="step" data-phase="complete"></div>
                        </div>
                        <span id="processingCurrent">0</span>
                        <span id="processingTotal">0</span>
                        <div id="processingFilename"></div>
                        <span id="processingElapsed">0:00</span>
                    </div>

                    <!-- Tachimi „ÉÜ„Ç≠„Çπ„Éà„Çπ„Éà„É≠„Éº„ÇØ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ -->
                    <div class="tachimi-text-container">
                        <svg class="tachimi-svg" viewBox="0 0 443 140">
                            <defs>
                                <radialGradient id="tachimiRadialGlow" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" stop-color="#f2d4d8" stop-opacity="0.6" />
                                    <stop offset="35%" stop-color="#e8c4ca" stop-opacity="0.3" />
                                    <stop offset="70%" stop-color="#d4a8b0" stop-opacity="0.08" />
                                    <stop offset="100%" stop-color="#d4a8b0" stop-opacity="0" />
                                </radialGradient>
                            </defs>
                            <ellipse class="tachimi-glow-bg" cx="222" cy="65" rx="260" ry="90" fill="url(#tachimiRadialGlow)" />
                            <text class="tachimi-char tachimi-char-0" x="0"   y="108">T</text>
                            <text class="tachimi-char tachimi-char-1" x="65"  y="108">a</text>
                            <text class="tachimi-char tachimi-char-2" x="127" y="108">c</text>
                            <text class="tachimi-char tachimi-char-3" x="183" y="108">h</text>
                            <text class="tachimi-char tachimi-char-4" x="252" y="108">i</text>
                            <text class="tachimi-char tachimi-char-5" x="293" y="108">m</text>
                            <text class="tachimi-char tachimi-char-6" x="391" y="108">i</text>
                        </svg>
                    </div>

                    <!-- ÈÄ≤Êçó„É©„Ç§„É≥ -->
                    <div class="tachimi-progress-area">
                        <div class="tachimi-progress-track">
                            <div class="tachimi-progress-fill" id="tachimiProgressFill"></div>
                        </div>
                        <div class="tachimi-progress-info">
                            <span class="tachimi-percent" id="tachimiPercent">0%</span>
                            <span class="tachimi-filename" id="tachimiFilename"></span>
                        </div>
                    </div>
                </div>

                <!-- ÂÆå‰∫Ü„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ -->
                <div class="stamp-complete" id="stampComplete">
                    <div class="apply-success-icon">
                        <div class="apply-success-burst"></div>
                        <svg viewBox="0 0 48 48" fill="none">
                            <circle class="apply-success-ring" cx="24" cy="24" r="22"/>
                            <path class="apply-success-check-path" d="M14 24l7 7 13-13"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÁîªÂÉèË™≠„ÅøËæº„Åø„É≠„Éº„Éá„Ç£„É≥„Ç∞„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
        <div id="imageLoadingOverlay" class="loading-overlay" style="display:none;">
            <div class="loading-content">
                <div class="loading-spinner"></div>
                <div class="loading-text">ÁîªÂÉè„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
                <div class="loading-timer">
                    <span id="loadingTimePrefix">ÊÆã„ÇäÁ¥Ñ</span>
                    <span id="loadingRemaining">10</span>
                    <span id="loadingTimeSuffix">Áßí</span>
                </div>
                <div class="loading-hint" id="loadingHint">PSD„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´„ÅØÊôÇÈñì„Åå„Åã„Åã„ÇãÂ†¥Âêà„Åå„ÅÇ„Çä„Åæ„Åô</div>
            </div>
        </div>

        <!-- ÁîªÂÉèÈÅ∏Êäû„É¢„Éº„Éâ„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
        <div id="cropModeOverlay" class="crop-mode-overlay" style="display:none;">
            <div class="crop-mode-preview">
                <!-- ÂÆöË¶è‰ªò„Åç„Éó„É¨„Éì„É•„Éº„Ç®„É™„Ç¢ -->
                <div class="ruler-preview-wrapper">
                    <!-- „Ç≥„Éº„Éä„ÉºÔºàÂ∑¶‰∏ä„ÅÆÁ©∫ÁôΩÔºâ -->
                    <div class="ruler-corner"></div>
                    <!-- ‰∏äÈÉ®ÂÆöË¶è -->
                    <div class="ruler ruler-horizontal" id="rulerHorizontal" title="‚Üì „Éâ„É©„ÉÉ„Ç∞„Åß„Ç¨„Ç§„Éâ„ÇíËøΩÂä†">
                        <canvas id="rulerHCanvas" class="ruler-canvas"></canvas>
                        <div class="ruler-grip">‚ãÆ</div>
                    </div>
                    <!-- Â∑¶ÂÅ¥ÂÆöË¶è -->
                    <div class="ruler ruler-vertical" id="rulerVertical" title="‚Üí „Éâ„É©„ÉÉ„Ç∞„Åß„Ç¨„Ç§„Éâ„ÇíËøΩÂä†">
                        <canvas id="rulerVCanvas" class="ruler-canvas"></canvas>
                        <div class="ruler-grip">‚ãØ</div>
                    </div>
                    <!-- ÁîªÂÉè„Ç≥„É≥„ÉÜ„Éä -->
                    <div class="crop-mode-preview-container" id="cropPreviewContainerFull">
                        <div id="zoomWrapper" class="zoom-wrapper">
                            <img id="cropPreviewImgFull" class="crop-preview-img-full" draggable="false">
                            <div id="guideLinesContainer" class="guide-lines-container"></div>
                            <div id="cropSelectionFull" class="crop-selection-full"></div>
                            <!-- Â°ó„Çä„Éó„É¨„Éì„É•„ÉºÔºàÈÅ∏ÊäûÁØÑÂõ≤Â§ñ„ÅÆÂ°ó„ÇäÔºâ -->
                            <div id="fillPreview" class="fill-preview" style="display:none;"></div>
                            <!-- „Çπ„Éà„É≠„Éº„ÇØ„Éó„É¨„Éì„É•„ÉºÔºà4Ëæ∫„ÅÆÁ∑öÔºâ -->
                            <div id="strokePreviewTop" class="stroke-preview stroke-h" style="display:none;"></div>
                            <div id="strokePreviewBottom" class="stroke-preview stroke-h" style="display:none;"></div>
                            <div id="strokePreviewLeft" class="stroke-preview stroke-v" style="display:none;"></div>
                            <div id="strokePreviewRight" class="stroke-preview stroke-v" style="display:none;"></div>
                            <!-- „Éâ„É©„ÉÉ„Ç∞‰∏≠„ÅÆ„Ç¨„Ç§„Éâ„Éó„É¨„Éì„É•„Éº -->
                            <div id="guidePreview" class="guide-preview" style="display:none;"></div>
                        </div>
                        <!-- „Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞„É≠„ÉÉ„ÇØ„Éú„Çø„É≥ÔºàÂè≥‰∏ã„ÄÅÂâäÈô§„Éú„Çø„É≥„ÅÆÂ∑¶Èö£Ôºâ -->
                        <button id="btnLockGuides" class="btn-floating-lock" style="display:none;" title="„Ç¨„Ç§„Éâ„Çí„É≠„ÉÉ„ÇØ (L)">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2"/>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                            </svg>
                        </button>
                        <!-- „Éï„É≠„Éº„ÉÜ„Ç£„É≥„Ç∞ÂâäÈô§„Éú„Çø„É≥ÔºàÂè≥‰∏ã„Å´ÈÖçÁΩÆÔºâ -->
                        <button id="btnFloatingClearAll" class="btn-floating-delete" style="display:none;" title="„Åô„Åπ„Å¶„ÇØ„É™„Ç¢">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
            <div class="crop-mode-panel">
                <div class="crop-mode-header">
                    <h3>ÁâàÈù¢ÊåáÂÆö</h3>
                    <!-- „Éö„Éº„Ç∏„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥Ôºà„Éò„ÉÉ„ÉÄ„ÉºÂÜÖÔºâ -->
                    <div class="crop-page-nav-inline">
                        <button id="btnPrevPage" class="btn btn-xs" title="Ââç„ÅÆ„Éö„Éº„Ç∏">‚óÄ</button>
                        <span id="cropPageInfo" class="crop-page-info">1 / 1</span>
                        <button id="btnNextPage" class="btn btn-xs" title="Ê¨°„ÅÆ„Éö„Éº„Ç∏">‚ñ∂</button>
                    </div>
                </div>

                <!-- „Çπ„ÉÜ„ÉÉ„Éó„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
                <div class="crop-step-indicator" id="cropStepIndicator">
                    <div class="crop-step" data-step="select">
                        <div class="crop-step-dot"></div>
                        <span class="crop-step-label">ÈÅ∏Êäû</span>
                    </div>
                    <div class="crop-step-line"></div>
                    <div class="crop-step" data-step="confirm">
                        <div class="crop-step-dot"></div>
                        <span class="crop-step-label">Á¢∫Ë™ç</span>
                    </div>
                    <div class="crop-step-line"></div>
                    <div class="crop-step" data-step="apply">
                        <div class="crop-step-dot"></div>
                        <span class="crop-step-label">ÈÅ©Áî®</span>
                    </div>
                </div>

                <!-- „Éí„É≥„Éà„ÉÜ„Ç≠„Çπ„Éà -->
                <p class="crop-mode-hint" id="cropModeHint">ÁîªÂÉè‰∏ä„Çí„Éâ„É©„ÉÉ„Ç∞„Åó„Å¶ÁØÑÂõ≤„ÇíÈÅ∏Êäû</p>

                <!-- ÁØÑÂõ≤„ÅÆÊåáÂÆöÊñπÊ≥ï -->
                <div class="crop-method-section">
                    <div class="crop-method-label">ÁØÑÂõ≤„ÅÆÊåáÂÆöÊñπÊ≥ï</div>
                    <div class="crop-method-cards">
                        <button class="crop-method-card" id="btnMethodDrag">
                            <svg class="method-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2" stroke-dasharray="4 2"/>
                                <path d="M8 8L16 16M16 16V10M16 16H10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <span class="method-title">„Éâ„É©„ÉÉ„Ç∞</span>
                            <span class="method-desc">ÁîªÂÉè‰∏ä„ÇíÁõ¥Êé•ÈÅ∏Êäû</span>
                        </button>
                        <button class="crop-method-card" id="btnMethodGuide">
                            <svg class="method-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <path d="M3 3v18M21 3v18" stroke-width="2" stroke-linecap="round" opacity="0.4"/>
                                <path d="M3 12h18" stroke-width="2" stroke-linecap="round"/>
                                <circle cx="7" cy="12" r="2" fill="currentColor"/>
                                <circle cx="17" cy="12" r="2" fill="currentColor"/>
                            </svg>
                            <span class="method-title">„Ç¨„Ç§„Éâ</span>
                            <span class="method-desc">ÂÆöË¶è„Åã„ÇâÂºï„ÅÑ„Å¶Ë®≠ÂÆö</span>
                        </button>
                    </div>
                    <!-- JSONË™≠„ÅøËæº„Åø„Éú„Çø„É≥ -->
                    <button class="crop-json-btn" id="btnLoadJsonInCrop">
                        <svg class="json-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                            <path d="M8 13h8M8 17h5"/>
                        </svg>
                        <span>JSON„Åã„ÇâË™≠„ÅøËæº„ÇÄ</span>
                    </button>
                    <!-- JSONË™≠„ÅøËæº„ÅøÂæå„ÅÆ„É©„Éô„É´ÈÅ∏Êäû -->
                    <div id="cropModeLabelSelect" class="crop-mode-label-select" style="display:none;">
                        <select id="labelSelectInCrop" class="label-select-full"></select>
                    </div>
                    <!-- JSONÊñ∞Ë¶èÁôªÈå≤„Éú„Çø„É≥ -->
                    <button class="crop-json-btn crop-json-register" id="btnRegisterJson">
                        <svg class="json-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                            <polyline points="14,2 14,8 20,8"/>
                            <line x1="12" y1="11" x2="12" y2="17"/>
                            <line x1="9" y1="14" x2="15" y2="14"/>
                        </svg>
                        <span>JSON„Å´Êñ∞Ë¶èÁôªÈå≤</span>
                    </button>
                </div>

                <!-- ÁèæÂú®„ÅÆÁØÑÂõ≤ -->
                <div class="crop-current-range">
                    <div class="range-header">
                        <span class="range-title">ÁèæÂú®„ÅÆÁØÑÂõ≤</span>
                        <button id="btnResetRange" class="btn btn-xs" title="„É™„Çª„ÉÉ„Éà">„É™„Çª„ÉÉ„Éà</button>
                    </div>
                    <div class="range-values">
                        <div class="range-value-item">
                            <span class="range-label">‚Üê</span>
                            <input type="number" id="cropLeftFull" value="0" class="led-input">
                        </div>
                        <div class="range-value-item">
                            <span class="range-label">‚Üë</span>
                            <input type="number" id="cropTopFull" value="0" class="led-input">
                        </div>
                        <div class="range-value-item">
                            <span class="range-label">‚Üí</span>
                            <input type="number" id="cropRightFull" value="0" class="led-input">
                        </div>
                        <div class="range-value-item">
                            <span class="range-label">‚Üì</span>
                            <input type="number" id="cropBottomFull" value="0" class="led-input">
                        </div>
                    </div>
                    <div id="cropModeDocSize" class="crop-mode-doc-size"></div>
                </div>

                <!-- „Ç¨„Ç§„Éâ„Çª„ÇØ„Ç∑„Éß„É≥Ôºà„Ç¨„Ç§„Éâ„Åå„ÅÇ„ÇãÊôÇ„ÅÆ„ÅøË°®Á§∫Ôºâ -->
                <div class="guide-section" id="guideSectionPanel" style="display:none;">
                    <div class="guide-action-row">
                        <button id="btnApplyGuides" class="btn btn-xs btn-primary">„Ç¨„Ç§„Éâ„Åã„ÇâÁØÑÂõ≤„ÇíË®≠ÂÆö</button>
                        <button id="btnClearGuides" class="btn btn-xs" title="„Ç¨„Ç§„Éâ„ÇíÂÖ®„Å¶ÂâäÈô§">ÂÖ®ÂâäÈô§</button>
                    </div>
                    <div id="guideList" class="guide-list" style="display:none;"></div>
                </div>

                <div id="cropModeColorSettings" class="crop-mode-colors" style="display:none;">
                    <div class="crop-color-item" id="cropModeStrokeRow" style="display:none;">
                        <label>Á∑ö:</label>
                        <select id="strokeColorFull">
                            <option value="black">Èªí</option>
                            <option value="white">ÁôΩ</option>
                            <option value="cyan">Ê∞¥Ëâ≤</option>
                        </select>
                        <span class="color-preview" id="strokeColorPreviewFull" style="background:#000;"></span>
                    </div>
                    <div class="crop-color-item" id="cropModeFillRow" style="display:none;">
                        <label>Â°ó:</label>
                        <select id="fillColorFull">
                            <option value="black">Èªí</option>
                            <option value="white">ÁôΩ</option>
                            <option value="cyan">Ê∞¥Ëâ≤</option>
                        </select>
                        <span class="color-preview" id="fillColorPreviewFull" style="background:#000;"></span>
                    </div>
                    <div class="crop-color-item" id="cropModeOpacityRow" style="display:none;">
                        <label>‰∏çÈÄèÊòéÂ∫¶:</label>
                        <input type="range" id="fillOpacityFull" min="0" max="100" value="50" class="opacity-slider-sm">
                        <span id="fillOpacityValueFull">50%</span>
                    </div>
                </div>

                <!-- „Ç¨„Ç§„Éâ„Åã„ÇâÁØÑÂõ≤„ÇíË®≠ÂÆö„Éú„Çø„É≥Ôºà„Ç¨„Ç§„Éâ„Åå4Êú¨‰ª•‰∏ä„ÅßË°®Á§∫Ôºâ -->
                <button id="btnPanelApplyGuides" class="btn-guide-apply" style="display:none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3v18M21 3v18M3 12h18" opacity="0.5"/>
                        <polyline points="17 8 12 13 9 10" stroke-width="2.5"/>
                    </svg>
                    „Ç¨„Ç§„Éâ„Åã„ÇâÁØÑÂõ≤„ÇíË®≠ÂÆö
                </button>

                <div class="crop-mode-actions">
                    <button id="btnApplyCrop" class="btn btn-primary btn-full">ÈÅ©Áî®</button>
                    <button id="btnCancelCrop" class="btn btn-full">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </div>
        </div>

        <!-- JSON„Éï„Ç°„Ç§„É´ÈÅ∏Êäû„É¢„Éº„ÉÄ„É´ -->
        <div id="jsonSelectModal" class="json-select-modal" style="display:none;">
            <div class="json-select-backdrop"></div>
            <div class="json-select-content">
                <div class="json-select-header">
                    <h3>JSON„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû</h3>
                    <button id="btnJsonSelectClose" class="json-select-close">&times;</button>
                </div>
                <div class="json-select-search">
                    <input type="text" id="jsonSearchInput" placeholder="‰ΩúÂìÅ„Çø„Ç§„Éà„É´„ÅßÊ§úÁ¥¢..." autocomplete="off">
                    <button id="btnJsonSearchClear" class="json-search-clear" style="display:none;">&times;</button>
                </div>
                <div class="json-select-path" id="jsonSelectPath"></div>
                <div class="json-select-list" id="jsonSelectList">
                    <div class="json-select-loading">Ë™≠„ÅøËæº„Åø‰∏≠...</div>
                </div>
                <div class="json-select-actions">
                    <button id="btnJsonSelectBrowse" class="btn btn-xs">„É≠„Éº„Ç´„É´„ÇíÈñã„Åè</button>
                </div>
            </div>
        </div>

        <!-- JSONÊñ∞Ë¶èÁôªÈå≤„É¢„Éº„ÉÄ„É´ -->
        <div id="jsonRegisterModal" class="json-register-modal" style="display:none;">
            <div class="json-register-backdrop"></div>
            <div class="json-register-content">
                <div class="json-register-header">
                    <h3>JSON„Å´Êñ∞Ë¶èÁôªÈå≤</h3>
                    <button id="btnJsonRegisterClose" class="json-register-close">&times;</button>
                </div>

                <!-- ÁèæÂú®„ÅÆÈÅ∏ÊäûÁØÑÂõ≤„Éó„É¨„Éì„É•„Éº -->
                <div class="register-current-range">
                    <div class="register-range-title">ÁôªÈå≤„Åô„ÇãÁØÑÂõ≤</div>
                    <div class="register-range-values">
                        <span>Â∑¶: <strong id="registerLeft">0</strong></span>
                        <span>‰∏ä: <strong id="registerTop">0</strong></span>
                        <span>Âè≥: <strong id="registerRight">0</strong></span>
                        <span>‰∏ã: <strong id="registerBottom">0</strong></span>
                    </div>
                    <div class="register-range-size">
                        „Çµ„Ç§„Ç∫: <strong id="registerSize">0 √ó 0</strong> px
                        ÔºàÁîªÂÉè: <span id="registerDocSize">0 √ó 0</span> pxÔºâ
                    </div>
                </div>

                <!-- „Çø„ÉñÂàáÊõø -->
                <div class="register-tabs">
                    <button class="register-tab active" data-tab="new">Êñ∞Ë¶è‰ΩúÊàê</button>
                    <button class="register-tab" data-tab="existing">Êó¢Â≠ò„Å´ËøΩÂä†</button>
                </div>

                <!-- Êñ∞Ë¶è‰ΩúÊàê„Éë„Éç„É´ -->
                <div class="register-panel" id="registerPanelNew">
                    <div class="register-form-group">
                        <label>„Ç∏„É£„É≥„É´</label>
                        <select id="registerGenre" class="register-select">
                            <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            <option value="‰∏ÄËà¨Â•≥ÊÄß">‰∏ÄËà¨Â•≥ÊÄß</option>
                            <option value="TL">TL</option>
                            <option value="BL">BL</option>
                            <option value="‰∏ÄËà¨Áî∑ÊÄß">‰∏ÄËà¨Áî∑ÊÄß</option>
                            <option value="„É°„É≥„Ç∫">„É°„É≥„Ç∫</option>
                            <option value="„Çø„ÉÜ„Ç≥„Éü">„Çø„ÉÜ„Ç≥„Éü</option>
                        </select>
                    </div>
                    <div class="register-form-group">
                        <label>„É¨„Éº„Éô„É´</label>
                        <select id="registerLabel" class="register-select" disabled>
                            <option value="">„Ç∏„É£„É≥„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                        </select>
                    </div>
                    <div class="register-form-group">
                        <label>‰ΩúÂìÅ„Çø„Ç§„Éà„É´</label>
                        <input type="text" id="registerTitle" class="register-input" placeholder="‰ΩúÂìÅ„Çø„Ç§„Éà„É´„ÇíÂÖ•Âäõ">
                    </div>
                    <div class="register-form-group">
                        <label>ÁØÑÂõ≤„É©„Éô„É´Âêç</label>
                        <input type="text" id="registerRangeLabelNew" class="register-input" placeholder="Âü∫Êú¨ÁØÑÂõ≤">
                        <div class="register-hint">‚Äª ÁîªÂÉè„Çµ„Ç§„Ç∫„ÅØËá™Âãï„Åß‰ªòÂä†„Åï„Çå„Åæ„Åô</div>
                    </div>
                    <div class="register-actions">
                        <button id="btnSaveNewJson" class="btn btn-primary">Êñ∞Ë¶è‰ΩúÊàê„Åó„Å¶‰øùÂ≠ò</button>
                    </div>
                </div>

                <!-- Êó¢Â≠ò„Å´ËøΩÂä†„Éë„Éç„É´ -->
                <div class="register-panel" id="registerPanelExisting" style="display:none;">
                    <div class="register-form-group">
                        <label>‰øùÂ≠òÂÖàJSON„Éï„Ç°„Ç§„É´</label>
                        <div class="register-file-select">
                            <input type="text" id="registerExistingFile" class="register-input" readonly placeholder="„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÈÅ∏Êäû">
                            <button id="btnSelectExistingJson" class="btn btn-xs">ÈÅ∏Êäû</button>
                        </div>
                        <div id="registerExistingInfo" class="register-existing-info" style="display:none;"></div>
                    </div>
                    <div class="register-form-group">
                        <label>ÁØÑÂõ≤„É©„Éô„É´Âêç</label>
                        <input type="text" id="registerRangeLabelExisting" class="register-input" placeholder="Âü∫Êú¨ÁØÑÂõ≤">
                        <div class="register-hint">‚Äª ÁîªÂÉè„Çµ„Ç§„Ç∫„ÅØËá™Âãï„Åß‰ªòÂä†„Åï„Çå„Åæ„Åô</div>
                    </div>
                    <div class="register-actions">
                        <button id="btnAddToExisting" class="btn btn-primary" disabled>Êó¢Â≠òJSON„Å´ËøΩÂä†</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÈáçË§á„É©„Éô„É´Á¢∫Ë™ç„É¢„Éº„ÉÄ„É´ -->
        <div id="duplicateLabelModal" class="duplicate-label-modal" style="display:none;">
            <div class="duplicate-label-backdrop"></div>
            <div class="duplicate-label-content">
                <div class="duplicate-label-header">
                    <h3>ÂêåÂêç„É©„Éô„É´„ÅåÂ≠òÂú®„Åó„Åæ„Åô</h3>
                </div>
                <div class="duplicate-label-body">
                    <p>„Äå<span id="duplicateLabelName"></span>„Äç„ÅØÊó¢„Å´Â≠òÂú®„Åó„Åæ„Åô„ÄÇ</p>
                    <p>„Å©„ÅÆ„Çà„ÅÜ„Å´Âá¶ÁêÜ„Åó„Åæ„Åô„ÅãÔºü</p>
                </div>
                <div class="duplicate-label-actions">
                    <button id="btnDuplicateOverwrite" class="btn">‰∏äÊõ∏„Åç</button>
                    <button id="btnDuplicateRename" class="btn">Âà•Âêç„Å´Â§âÊõ¥</button>
                    <button id="btnDuplicateAddDate" class="btn">Êó•ÊôÇ„ÇíËøΩÂä†</button>
                    <button id="btnDuplicateCancel" class="btn btn-secondary">„Ç≠„É£„É≥„Çª„É´</button>
                </div>
            </div>
        </div>

        <!-- Ê©üËÉΩ„Ç¢„É≥„É≠„ÉÉ„ÇØË®≠ÂÆö„É¢„Éº„ÉÄ„É´ -->
        <div id="featureUnlockModal" class="feature-unlock-modal" style="display:none;">
            <div class="feature-unlock-backdrop"></div>
            <div class="feature-unlock-content">
                <div class="feature-unlock-header">
                    <h3>Ê©üËÉΩ„Ç¢„É≥„É≠„ÉÉ„ÇØ</h3>
                    <button id="btnFeatureUnlockClose" class="feature-unlock-close">&times;</button>
                </div>
                <div class="feature-unlock-scroll-area">
                    <div class="feature-unlock-body">
                        <!-- „É≠„ÉÉ„ÇØÁä∂ÊÖã„Ç§„É≥„Ç∏„Ç±„Éº„Çø„Éº -->
                        <div id="unlockStatus" class="unlock-status locked">
                            <div class="unlock-status-indicator"></div>
                            <span class="unlock-status-text">JSONÊñ∞Ë¶èÁôªÈå≤: „É≠„ÉÉ„ÇØ‰∏≠</span>
                        </div>

                        <!-- „Éë„Çπ„ÉØ„Éº„ÉâÂÖ•Âäõ„Ç®„É™„Ç¢Ôºà„É≠„ÉÉ„ÇØÊôÇ„ÅÆ„ÅøË°®Á§∫Ôºâ -->
                        <div id="unlockInputArea" class="unlock-input-area">
                            <label class="unlock-label">„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ</label>
                            <div class="unlock-input-row">
                                <input type="password" id="unlockPassword" class="unlock-input"
                                       placeholder="„Éë„Çπ„ÉØ„Éº„Éâ" autocomplete="off">
                                <button id="btnUnlock" class="btn-unlock">Ëß£Èô§</button>
                            </div>
                            <div id="unlockError" class="unlock-error" style="display:none;">
                                „Éë„Çπ„ÉØ„Éº„Éâ„ÅåÊ≠£„Åó„Åè„ÅÇ„Çä„Åæ„Åõ„Çì
                            </div>
                        </div>

                        <!-- „Ç¢„É≥„É≠„ÉÉ„ÇØÊ∏à„ÅøË°®Á§∫Ôºà„Ç¢„É≥„É≠„ÉÉ„ÇØÊôÇ„ÅÆ„ÅøË°®Á§∫Ôºâ -->
                        <div id="unlockedArea" class="unlocked-area" style="display:none;">
                            <div class="unlocked-badge">
                                <span class="unlocked-icon">‚úì</span>
                                <span>JSONÊñ∞Ë¶èÁôªÈå≤„ÅåÂà©Áî®ÂèØËÉΩ„Åß„Åô</span>
                            </div>
                            <button id="btnLockAgain" class="btn-lock-again">ÂÜç„É≠„ÉÉ„ÇØ</button>
                        </div>
                    </div>
                    <!-- Êõ¥Êñ∞„ÉÅ„Çß„ÉÉ„ÇØ„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="update-check-section">
                        <div class="update-check-header">
                            <span>„Ç¢„ÉÉ„Éó„Éá„Éº„Éà</span>
                        </div>
                        <div id="updateStatus" class="update-status">
                            <span id="currentVersion" class="current-version">v1.0.7</span>
                        </div>
                        <button id="btnCheckUpdate" class="btn-check-update">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 12a9 9 0 11-6.219-8.56"/>
                                <path d="M21 3v9h-9"/>
                            </svg>
                            Êõ¥Êñ∞„ÇíÁ¢∫Ë™ç
                        </button>
                        <div id="updateResult" class="update-result" style="display:none;"></div>
                    </div>
                </div>
                <div class="feature-unlock-footer">
                    <span class="version-info">Tachimi Standalone v1.1.0</span>
                </div>
            </div>
        </div>
    </div>
    <!-- ES Modules „Ç®„É≥„Éà„É™„Éù„Ç§„É≥„Éà -->
    <script type="module" src="js/main.js"></script>
</body>
</html>
